<ng-container *ngIf="this.ws.datastore.mods.hasOwnProperty(this.ws.datastore.currentMod)">
  <button mat-raised-button color="" [matMenuTriggerFor]="mainMenu" aria-label="Main menu">
  <mat-icon>more_vert</mat-icon>{{this.ws.datastore.mods[this.ws.datastore.currentMod].label}} 
  </button>
</ng-container>


<mat-menu #mainMenu="matMenu"  >
<ng-container *ngFor="let mm of this.ws.datastore.mods | keyvalue:originalOrderMod ">
    <button mat-menu-item (click)="(this.ws.datastore.currentMod=mm.key)"
    [ngStyle]="{'color' : mm.key==this.ws.datastore.currentMod ? 'red' : 'white' }">
      {{mm.value.label}}
      <span
      matBadge="{{this.ws.datastore.mods[mm.key].arr_errors_content.length}}" 
      [matBadgeHidden]="this.ws.datastore.mods[mm.key].arr_errors_content.length===0" 
      matBadgePosition="above" matBadgeColor="warn" matBadgeSize="small" matBadgeOverlap="false"
      >
      </span>
    </button>
  
</ng-container>
</mat-menu>


<app-module-content 
[mod]='this.ws.datastore.currentMod'
[data]='this.ws.datastore.mods[this.ws.datastore.currentMod]'
[messagesSource]='this.ws.datastore.mods[this.ws.datastore.currentMod].messagesSource'
></app-module-content>